function simpleCopy(e,t){e&&0!==e.trim().length?navigator.clipboard&&navigator.clipboard.writeText?navigator.clipboard.writeText(e).then((()=>{const e=window.I18nManager?window.I18nManager.getMessage("copied"):"Copied!";showButtonFeedback(t,e,"#28a745")})).catch((o=>{fallbackCopy(e,t)})):fallbackCopy(e,t):showButtonFeedback(t,"No text!","#dc3545")}function fallbackCopy(e,t){try{const o=document.createElement("textarea");o.value=e,o.style.position="fixed",o.style.left="-9999px",o.style.top="0",document.body.appendChild(o),o.focus(),o.select();const n=document.execCommand("copy");if(document.body.removeChild(o),n){showButtonFeedback(t,window.I18nManager?window.I18nManager.getMessage("copied"):"Copied!","#28a745")}else{showButtonFeedback(t,window.I18nManager?window.I18nManager.getMessage("failed"):"Failed!","#dc3545")}}catch(e){showButtonFeedback(t,window.I18nManager?window.I18nManager.getMessage("failed"):"Error!","#dc3545")}}function showButtonFeedback(e,t,o){if(!e)return;const n=e.textContent,a=e.style.background;e.textContent=t,e.style.background=o,setTimeout((()=>{e.textContent=n,e.style.background=a||"#4a5568"}),1500)}function selectCode(e){try{const t=window.getSelection(),o=document.createRange();o.selectNodeContents(e),t.removeAllRanges(),t.addRange(o)}catch(e){}}function handleAllClicks(e){if(e.target.classList.contains("copy-btn")){e.preventDefault(),e.stopPropagation();let t=null;const o=e.target.closest("[data-code-container]");if(o&&(t=o.querySelector("pre, code")),!t&&e.target.previousElementSibling){const o=e.target.previousElementSibling;if("PRE"===o.tagName||"CODE"===o.tagName)t=o;else{let e=o.previousElementSibling;for(;e&&!t;){if("PRE"===e.tagName||"CODE"===e.tagName){t=e;break}e=e.previousElementSibling}}}if(!t){t=e.target.parentElement.querySelector("pre, code")}if(!t){let o=e.target.parentElement,n=0;for(;o&&n<5;){const e=o.querySelector("pre, code");if(e){t=e;break}o=o.parentElement,n++}}if(t){let o="";if("PRE"===t.tagName){const e=t.querySelector("code");e&&(o=e.textContent||e.innerText||"")}if(o||"CODE"!==t.tagName||(o=t.textContent||t.innerText||""),!o){o=(t.textContent||t.innerText||"").replace(/Copy Code\s*$/gi,"").trim()}if(!o)try{const e=t.cloneNode(!0);e.querySelectorAll(".copy-btn, button").forEach((e=>e.remove())),o=(e.textContent||e.innerText||"").trim()}catch(e){}if(o&&o.trim().length>0)simpleCopy(o.trim(),e.target);else{const t=window.I18nManager?window.I18nManager.getMessage("failed"):"No text!";showButtonFeedback(e.target,t,"#dc3545")}}else{const t=window.I18nManager?window.I18nManager.getMessage("failed"):"No code!";showButtonFeedback(e.target,t,"#dc3545")}}else if(e.target.closest("pre")||e.target.closest("code")){if(e.target.classList.contains("copy-btn"))return;selectCode(e.target.closest("pre")||e.target.closest("code"))}}function setupEventListener(){document.removeEventListener("click",handleAllClicks),document.addEventListener("click",handleAllClicks,!0)}function initialize(){setupEventListener()}function getLocalizedCopyButtonHTML(){return`<button class="copy-btn" style="width: 100%; background: #4a5568; color: white; border: none; padding: 8px; border-radius: 4px; cursor: pointer; font-size: 12px; font-family: system-ui;" onmouseover="this.style.background='#5a6578'" onmouseout="this.style.background='#4a5568'">${window.I18nManager?window.I18nManager.getMessage("copy"):"Copy Code"}</button>`}function updateCopyButtonTexts(){const e=document.querySelectorAll(".copy-btn"),t=window.I18nManager?window.I18nManager.getMessage("copy"):"Copy Code";e.forEach((e=>{(e.textContent.includes("Copy")||e.textContent.includes("Копировать")||e.textContent.includes("Copiar"))&&(e.textContent=t)}))}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",initialize):initialize(),setTimeout((()=>{initialize()}),1e3),setTimeout((()=>{initialize()}),3e3),window.CodeCopyHandler={markdownToHtml:function(e){e.length,e.includes("```"),(e.match(/```/g)||[]).length;const t=e.replace(/```(\w+)?\s*\n?([\s\S]*?)```/g,((e,t,o)=>{o.length,o.substring(0,50),e.length;"json"===t&&o.length;return`<div data-code-container style="margin: 8px 0;">\n          <pre style="background: #1a1a1a; padding: 12px; border-radius: 6px; overflow-x: auto; color: #e6e6e6; font-family: 'Fira Code', 'Cascadia Code', 'JetBrains Mono', Consolas, monospace; border: 1px solid #444444; margin: 0 0 4px 0; cursor: pointer; white-space: pre-wrap; word-wrap: break-word; max-height: 500px; overflow-y: auto;" title="Click to select all code"><code>${o.replace(/^\s*\n/,"").replace(/\n\s*$/,"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}</code></pre>\n          <button class="copy-btn" style="width: 100%; background: #4a5568; color: white; border: none; padding: 8px; border-radius: 4px; cursor: pointer; font-size: 12px; font-family: system-ui;" onmouseover="this.style.background='#5a6578'" onmouseout="this.style.background='#4a5568'">Copy Code</button>\n        </div>`})).replace(/^#### (.*$)/gm,'<h4 style="margin: 10px 0 6px 0; font-size: 14px; font-weight: 600; color: #ffffff;">$1</h4>').replace(/^### (.*$)/gm,'<h3 style="margin: 12px 0 8px 0; font-size: 16px; font-weight: 600; color: #ffffff;">$1</h3>').replace(/^## (.*$)/gm,'<h2 style="margin: 16px 0 8px 0; font-size: 18px; font-weight: 600; color: #ffffff;">$1</h2>').replace(/^# (.*$)/gm,'<h1 style="margin: 16px 0 8px 0; font-size: 20px; font-weight: 600; color: #ffffff;">$1</h1>').replace(/`([^`]+)`/g,"<code style=\"background: #1a1a1a; padding: 3px 6px; border-radius: 4px; font-family: 'Fira Code', 'Cascadia Code', 'JetBrains Mono', Consolas, monospace; cursor: pointer; border: 1px solid #444444; color: #ff6b7a; font-size: 13px;\" title=\"Click to select\">$1</code>").replace(/<code class="code-block">([\s\S]*?)<\/code>/g,((e,t)=>`<div data-code-container style="margin: 8px 0;">\n          <code style="display: block; background: #1a1a1a; padding: 12px; border-radius: 6px; font-family: 'Fira Code', 'Cascadia Code', 'JetBrains Mono', Consolas, monospace; white-space: pre-wrap; word-wrap: break-word; color: #e6e6e6; border: 1px solid #444444; margin: 0 0 4px 0; cursor: pointer; max-height: 500px; overflow-y: auto;" title="Click to select all code">${t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}</code>\n          <button class="copy-btn" style="width: 100%; background: #4a5568; color: white; border: none; padding: 8px; border-radius: 4px; cursor: pointer; font-size: 12px; font-family: system-ui;" onmouseover="this.style.background='#5a6578'" onmouseout="this.style.background='#4a5568'">Copy Code</button>\n        </div>`)).replace(/\*\*(.*?)\*\*/g,'<strong style="color: #ffffff;">$1</strong>').replace(/\*(.*?)\*/g,'<em style="color: #cccccc;">$1</em>').replace(/\n/g,"<br>");t.length,t.substring(0,200),t.length,e.length;t.length;(t.match(/<pre[^>]*>/g)||[]).length,(e.match(/```/g)||[]).length;return t}};